!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@angular/core"),require("@angular/common/http"),require("rxjs")):"function"==typeof define&&define.amd?define("@angular-cool/http",["exports","tslib","@angular/core","@angular/common/http","rxjs"],t):t((e["angular-cool"]=e["angular-cool"]||{},e["angular-cool"].http={}),e.tslib,e.ng.core,e.ng.common.http,null)}(this,function(e,d,t,r,s){"use strict";var o=function(){function l(){}return l.prototype.getCookie=function(e){return this.getCookieCollection()[e]},l.prototype.getCookieCollection=function(){var e,t,r=document.cookie;if(r===this.lastReadRawCookieCollection)return this.lastReadCookieCollection;if(this.lastReadRawCookieCollection=r,this.lastReadCookieCollection={},-1!==this.lastReadRawCookieCollection.indexOf("; ")){var o=this.lastReadRawCookieCollection.split("; ");try{for(var n=d.__values(o),s=n.next();!s.done;s=n.next()){var i=s.value,a=i.indexOf("=");if(0<a){var u=l.tryDecodeUriComponent(i.substring(0,a));this.lastReadCookieCollection[u]=l.tryDecodeUriComponent(i.substring(a+1))}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}}return this.lastReadCookieCollection},l.tryDecodeUriComponent=function(e){try{return decodeURIComponent(e)}catch(t){return e}},l}(),n=function(e,t){this.key=e,this.value=t},h=function(a){function e(e,t,r,o,n){var s=this.constructor,i=a.call(this,"Failed to call api "+e+" "+t+", status code: "+r)||this;return i.method=e,i.url=t,i.status=r,i.statusText=o,i.body=n,Object.setPrototypeOf(i,s.prototype),i}return d.__extends(e,a),e}(Error),i={},a=function(){function e(e){this._http=e,this._cookieStore=new o,this._globalHeaders=[],this._requestInterceptors=[],this._responseInterceptors=[],this._customCookieToHeaders=[]}return Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this._baseUrl},enumerable:!0,configurable:!0}),e.prototype.registerBaseUrl=function(e){this._baseUrl=e,"/"!==this._baseUrl[this._baseUrl.length-1]&&(this._baseUrl+="/")},e.prototype.deRegisterBaseUrl=function(){this._baseUrl=null},e.prototype.setWithCredentials=function(e){this._withCredentials=e},e.prototype.registerGlobalHeader=function(e){this.deregisterGlobalHeader(e.key),this._globalHeaders.push(e)},e.prototype.getGlobalHeaders=function(){return this._globalHeaders},e.prototype.deregisterGlobalHeader=function(t){var e=this._globalHeaders.findIndex(function(e){return e.key===t});return-1!==e&&(this._globalHeaders.splice(e,1),!0)},e.prototype.removeAllRegisteredGlobalHeaders=function(){this._globalHeaders.length=0},e.prototype.registerRequestInterceptor=function(e){this._requestInterceptors.push(e)},e.prototype.deregisterRequestInterceptor=function(e){var t=this._requestInterceptors.indexOf(e);return-1!==t&&(this._requestInterceptors.splice(t,1),!0)},e.prototype.registerResponseInterceptor=function(e){this._responseInterceptors.push(e)},e.prototype.deregisterResponseInterceptor=function(e){var t=this._responseInterceptors.indexOf(e);return-1!==t&&(this._responseInterceptors.splice(t,1),!0)},e.prototype.sendCookieValueInCustomHeader=function(e,t){this._customCookieToHeaders.push({cookieName:e,customHeaderName:t})},e.prototype.getAsync=function(t,r){return void 0===r&&(r=i),d.__awaiter(this,void 0,void 0,function(){var o;return d.__generator(this,function(e){switch(e.label){case 0:return[4,(o=this)._requestCoreAsync(t,"GET",null,r,function(e,t,r){return o._http.get(e,r)})];case 1:return[2,e.sent()]}})})},e.prototype.postAsync=function(t,r,n){return void 0===n&&(n=i),d.__awaiter(this,void 0,void 0,function(){var o;return d.__generator(this,function(e){switch(e.label){case 0:return[4,(o=this)._requestCoreAsync(t,"POST",r,n,function(e,t,r){return o._http.post(e,t,r)})];case 1:return[2,e.sent()]}})})},e.prototype.putAsync=function(t,r,n){return void 0===n&&(n=i),d.__awaiter(this,void 0,void 0,function(){var o;return d.__generator(this,function(e){switch(e.label){case 0:return[4,(o=this)._requestCoreAsync(t,"PUT",r,n,function(e,t,r){return o._http.put(e,t,r)})];case 1:return[2,e.sent()]}})})},e.prototype.deleteAsync=function(t,r){return void 0===r&&(r=i),d.__awaiter(this,void 0,void 0,function(){var o;return d.__generator(this,function(e){switch(e.label){case 0:return[4,(o=this)._requestCoreAsync(t,"DELETE",null,r,function(e,t,r){return o._http["delete"](e,r)})];case 1:return[2,e.sent()]}})})},e.prototype.patchAsync=function(t,r,n){return void 0===n&&(n=i),d.__awaiter(this,void 0,void 0,function(){var o;return d.__generator(this,function(e){switch(e.label){case 0:return[4,(o=this)._requestCoreAsync(t,"PATCH",r,n,function(e,t,r){return o._http.patch(e,t,r)})];case 1:return[2,e.sent()]}})})},e.prototype.headAsync=function(t,r){return void 0===r&&(r=i),d.__awaiter(this,void 0,void 0,function(){var o;return d.__generator(this,function(e){switch(e.label){case 0:return[4,(o=this)._requestCoreAsync(t,"HEAD",null,r,function(e,t,r){return o._http.head(e,r)})];case 1:return[2,e.sent()]}})})},e.prototype._requestCoreAsync=function(a,u,c,l,p){return d.__awaiter(this,void 0,void 0,function(){var r,o,n,s,i;return d.__generator(this,function(e){switch(e.label){case 0:return a=this._convertUrl(a),r=this._modifyOptions(l),o=this._convertAngularHeadersToHttpClientHeaders(r.headers),[4,this._invokeRequestInterceptorsAsync(a,u,c,o)];case 1:if(e.sent())return[2];r.headers=this._updateAngularHeadersFromHttpClientHeaders(o,r.headers),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,p(a,c,r).toPromise()];case 3:return n=e.sent(),[3,5];case 4:return s=e.sent(),n=s,[3,5];case 5:return[4,this._invokeResponseInterceptorsAsync(n,a,u,c,o)];case 6:if(e.sent())return[2];if(!n.ok)throw new h(u,a,n.status,n.statusText,JSON.stringify(n.body));try{i=JSON.parse(n.body)}catch(t){i={data:n.body}}return[2,i]}})})},e.prototype.getObservable=function(e,t){void 0===t&&(t=i);var o=this;return o._requestCoreObservable(e,"GET",null,t,function(e,t,r){return o._http.get(e,r)})},e.prototype.postObservable=function(e,t,r){void 0===r&&(r=i);var o=this;return o._requestCoreObservable(e,"POST",t,r,function(e,t,r){return o._http.post(e,t,r)})},e.prototype.putObservable=function(e,t,r){void 0===r&&(r=i);var o=this;return o._requestCoreObservable(e,"PUT",t,r,function(e,t,r){return o._http.put(e,t,r)})},e.prototype.deleteObservable=function(e,t){void 0===t&&(t=i);var o=this;return o._requestCoreObservable(e,"DELETE",null,t,function(e,t,r){return o._http["delete"](e,r)})},e.prototype.patchObservable=function(e,t,r){void 0===r&&(r=i);var o=this;return o._requestCoreObservable(e,"PATCH",t,r,function(e,t,r){return o._http.patch(e,t,r)})},e.prototype.headObservable=function(e,t){void 0===t&&(t=i);var o=this;return o._requestCoreObservable(e,"HEAD",null,t,function(e,t,r){return o._http.head(e,r)})},e.prototype._requestCoreObservable=function(e,t,r,o,n){return s.from(this._requestCoreAsync(e,t,r,o,n))},e.prototype._convertUrl=function(e){var t=e;return this._baseUrl&&(t=this._baseUrl+t),t},e.prototype._modifyOptions=function(e){var t={headers:e.headers||new r.HttpHeaders,observe:"response",params:e.params,reportProgress:e.reportProgress,responseType:"text",withCredentials:e.withCredentials||this._withCredentials};return e.headers=e.headers||new r.HttpHeaders,t.headers=this._appendGlobalHeaders(t.headers),t.headers=this._tryAppendRegisteredCookiesToCustomHeaders(t.headers),t},e.prototype._appendGlobalHeaders=function(e){var t,r,o=e;try{for(var n=d.__values(this._globalHeaders),s=n.next();!s.done;s=n.next()){var i=s.value;o=e.set(i.key,i.value)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=n["return"])&&r.call(n)}finally{if(t)throw t.error}}return o},e.prototype._tryAppendRegisteredCookiesToCustomHeaders=function(e){var t,r,o=e;try{for(var n=d.__values(this._customCookieToHeaders),s=n.next();!s.done;s=n.next()){var i=s.value,a=this._cookieStore.getCookie(i.cookieName);a&&(o=e.set(i.customHeaderName,a))}}catch(u){t={error:u}}finally{try{s&&!s.done&&(r=n["return"])&&r.call(n)}finally{if(t)throw t.error}}return o},e.prototype._invokeRequestInterceptorsAsync=function(i,a,u,c){return d.__awaiter(this,void 0,void 0,function(){var t,r,o,n,s;return d.__generator(this,function(e){switch(e.label){case 0:e.trys.push([0,5,6,7]),o=d.__values(this._requestInterceptors),n=o.next(),e.label=1;case 1:return n.done?[3,4]:[4,n.value.beforeRequestAsync(i,a,u,c)];case 2:if(e.sent())return[2,!0];e.label=3;case 3:return n=o.next(),[3,1];case 4:return[3,7];case 5:return s=e.sent(),t={error:s},[3,7];case 6:try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}return[7];case 7:return[2,!1]}})})},e.prototype._invokeResponseInterceptorsAsync=function(i,a,u,c,l){return d.__awaiter(this,void 0,void 0,function(){var t,r,o,n,s;return d.__generator(this,function(e){switch(e.label){case 0:e.trys.push([0,5,6,7]),o=d.__values(this._responseInterceptors),n=o.next(),e.label=1;case 1:return n.done?[3,4]:[4,n.value.afterResponseAsync(i,a,u,c,l)];case 2:if(e.sent())return[2,!0];e.label=3;case 3:return n=o.next(),[3,1];case 4:return[3,7];case 5:return s=e.sent(),t={error:s},[3,7];case 6:try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}return[7];case 7:return[2,!1]}})})},e.prototype._convertAngularHeadersToHttpClientHeaders=function(r){return r.keys().map(function(e){var t=new n;return t.key=e,t.value=r.get(e),t})},e.prototype._updateAngularHeadersFromHttpClientHeaders=function(e,t){var r,o,n=t;try{for(var s=d.__values(e),i=s.next();!i.done;i=s.next()){var a=i.value;t.get(a.key)!==a.value&&(n=t.set(a.key,a.value))}}catch(u){r={error:u}}finally{try{i&&!i.done&&(o=s["return"])&&o.call(s)}finally{if(r)throw r.error}}return n},e}();a.decorators=[{type:t.Injectable}],a.ctorParameters=function(){return[{type:r.HttpClient}]};var u=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e}();u.decorators=[{type:t.NgModule,args:[{exports:[],imports:[r.HttpClientModule],providers:[a]}]}],e.CookieStore=o,e.CoolHttp=a,e.HttpHeader=n,e.HttpError=h,e.DEFAULT_REQUEST_OPTIONS=i,e.CoolHttpModule=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-cool-http.umd.min.js.map

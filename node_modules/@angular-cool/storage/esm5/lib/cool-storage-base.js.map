{
  "version": 3,
  "file": "cool-storage-base.js",
  "sources": [
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-storage-base.ts"
  ],
  "sourcesContent": [
    "import { Observable, Subject } from 'rxjs';\nimport { StorageChangeArguments } from './storage-change-arguments.interface';\n\nexport abstract class CoolStorageBase {\n  private _storageObject: any;\n  private _itemSetSubject: Subject<StorageChangeArguments>;\n  private _itemRemovedSubject: Subject<StorageChangeArguments>;\n\n  protected constructor(storageObject: any, storageObjectName: string) {\n    if (!storageObject) {\n      throw new Error(`Current browser does not support ${ storageObjectName }`);\n    }\n\n    this._storageObject = storageObject;\n\n    this._itemSetSubject = new Subject<StorageChangeArguments>();\n    this._itemRemovedSubject = new Subject<StorageChangeArguments>();\n  }\n\n  public get itemSetObservable(): Observable<StorageChangeArguments> {\n    return this._itemSetSubject.asObservable();\n  }\n\n  public get itemRemovedObservable(): Observable<StorageChangeArguments> {\n    return this._itemRemovedSubject.asObservable();\n  }\n\n  public getItem(key: string): string {\n    return this._storageObject.getItem(key) || null;\n  }\n\n  public setItem(key: string, value: string): void {\n    this._itemSetSubject.next({\n      key,\n      value\n    });\n\n    this._setItemInStorage(key, value);\n  }\n\n  public removeItem(key: string): void {\n    let currentValue = this.tryGetObject(key);\n\n    if (!currentValue) {\n      currentValue = this.getItem(key);\n    }\n\n    this._itemRemovedSubject.next({\n      key,\n      value: currentValue\n    });\n\n    this._storageObject.removeItem(key);\n  }\n\n  public key(index: number): string {\n    return this._storageObject.key(index);\n  }\n\n  public clear(): void {\n    this._storageObject.clear();\n  }\n\n  public get length(): number {\n    return this._storageObject.length;\n  }\n\n  public getObject<T>(key: string): T {\n    let jsonInStorage = this.getItem(key);\n\n    if (jsonInStorage === null) {\n      return null;\n    }\n\n    return JSON.parse(jsonInStorage) as T;\n  }\n\n  public tryGetObject<T>(key: string): T {\n    try {\n      return this.getObject<T>(key);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  public setObject(key: string, value: any): void {\n    this._itemSetSubject.next({\n      key,\n      value\n    });\n\n    this._setItemInStorage(key, JSON.stringify(value));\n  }\n\n  private _setItemInStorage(key: string, value: string) {\n    this._storageObject.setItem(key, value);\n  }\n}\n"
  ],
  "names": [],
  "mappings": ";;;;AAAA,OAAO,EAAc,OAAO,EAAE,MAAM,MAAM,CAAC;;;;AAG3C,MAAM,OAAgB,eAAe;;;;;IAKnC,YAAsB,aAAkB,EAAE,iBAAyB;QACjE,IAAI,CAAC,aAAa,EAAE;YAClB,MAAM,IAAI,KAAK,CAAC,oCAAqC,iBAAkB,EAAE,CAAC,CAAC;SAC5E;QAED,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QAEpC,IAAI,CAAC,eAAe,GAAG,IAAI,OAAO,EAA0B,CAAC;QAC7D,IAAI,CAAC,mBAAmB,GAAG,IAAI,OAAO,EAA0B,CAAC;KAClE;;;;QAEU,iBAAiB;QAC1B,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;;;;;QAGlC,qBAAqB;QAC9B,OAAO,IAAI,CAAC,mBAAmB,CAAC,YAAY,EAAE,CAAC;;;;;;IAG1C,OAAO,CAAC,GAAW;QACxB,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC;;;;;;;IAG3C,OAAO,CAAC,GAAW,EAAE,KAAa;QACvC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC;YACxB,GAAG;YACH,KAAK;SACN,CAAC,CAAC;QAEH,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;;;;;;IAG9B,UAAU,CAAC,GAAW;QAC3B,qBAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;QAE1C,IAAI,CAAC,YAAY,EAAE;YACjB,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SAClC;QAED,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC;YAC5B,GAAG;YACH,KAAK,EAAE,YAAY;SACpB,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;;;;;;IAG/B,GAAG,CAAC,KAAa;QACtB,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;;;;;IAGjC,KAAK;QACV,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;;;;;QAGnB,MAAM;QACf,OAAO,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;;;;;;;IAG7B,SAAS,CAAI,GAAW;QAC7B,qBAAI,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAEtC,IAAI,aAAa,KAAK,IAAI,EAAE;YAC1B,OAAO,IAAI,CAAC;SACb;QAED,yBAAO,IAAI,CAAC,KAAK,CAAC,aAAa,CAAM,EAAC;;;;;;;IAGjC,YAAY,CAAI,GAAW;QAChC,IAAI;YACF,OAAO,IAAI,CAAC,SAAS,CAAI,GAAG,CAAC,CAAC;SAC/B;QAAC,wBAAO,CAAC,EAAE;YACV,OAAO,IAAI,CAAC;SACb;;;;;;;IAGI,SAAS,CAAC,GAAW,EAAE,KAAU;QACtC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC;YACxB,GAAG;YACH,KAAK;SACN,CAAC,CAAC;QAEH,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;;;;;;;IAG7C,iBAAiB,CAAC,GAAW,EAAE,KAAa;QAClD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;;CAE3C"
}

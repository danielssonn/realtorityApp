{
  "version": 3,
  "file": "angular-cool-storage.js",
  "sources": [
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-storage.module.ts",
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-session-storage.ts",
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-local-storage.ts",
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-server-storage.ts",
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-storage-base.ts"
  ],
  "sourcesContent": [
    "import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CoolLocalStorage } from './cool-local-storage';\nimport { CoolSessionStorage } from './cool-session-storage';\n\n@NgModule({\n  providers: [\n    CoolLocalStorage,\n    CoolSessionStorage\n  ]\n})\nexport class CoolStorageModule {\n  /** @deprecated */\n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: CoolStorageModule,\n      providers: []\n    };\n  }\n}\n",
    "import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nimport { CoolStorageBase } from './cool-storage-base';\nimport { CoolServerStorage } from './cool-server-storage';\n\n@Injectable()\nexport class CoolSessionStorage extends CoolStorageBase {\n  constructor(@Inject(PLATFORM_ID) platformId: any) {\n    if (isPlatformBrowser(platformId)) {\n      super(window.sessionStorage, 'SessionStorage');\n    } else {\n      super(new CoolServerStorage(), 'SessionStorage');\n    }\n  }\n}\n",
    "import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nimport { CoolStorageBase } from './cool-storage-base';\nimport { CoolServerStorage } from './cool-server-storage';\n\n@Injectable()\nexport class CoolLocalStorage extends CoolStorageBase {\n  constructor(@Inject(PLATFORM_ID) platformId: any) {\n    if (isPlatformBrowser(platformId)) {\n      super(window.localStorage, 'LocalStorage');\n    } else {\n      super(new CoolServerStorage(), 'LocalStorage');\n    }\n  }\n}\n",
    "export class CoolServerStorage {\n  private _storageObject: any;\n\n  public constructor() {\n    this._storageObject = {};\n  }\n\n  public getItem(key: string): string {\n    return this._storageObject[key] || null;\n  }\n\n  public setItem(key: string, value: string): void {\n    this._storageObject[key] = value;\n  }\n\n  public removeItem(key: string): void {\n    this._storageObject[key] = undefined;\n  }\n\n  public key(index: number): string {\n    return this._storageObject.key(index);\n  }\n\n  public clear(): void {\n    this._storageObject = {};\n  }\n\n  public get length(): number {\n    return Object.keys(this._storageObject).length;\n  }\n}",
    "import { Observable, Subject } from 'rxjs';\nimport { StorageChangeArguments } from './storage-change-arguments.interface';\n\nexport abstract class CoolStorageBase {\n  private _storageObject: any;\n  private _itemSetSubject: Subject<StorageChangeArguments>;\n  private _itemRemovedSubject: Subject<StorageChangeArguments>;\n\n  protected constructor(storageObject: any, storageObjectName: string) {\n    if (!storageObject) {\n      throw new Error(`Current browser does not support ${ storageObjectName }`);\n    }\n\n    this._storageObject = storageObject;\n\n    this._itemSetSubject = new Subject<StorageChangeArguments>();\n    this._itemRemovedSubject = new Subject<StorageChangeArguments>();\n  }\n\n  public get itemSetObservable(): Observable<StorageChangeArguments> {\n    return this._itemSetSubject.asObservable();\n  }\n\n  public get itemRemovedObservable(): Observable<StorageChangeArguments> {\n    return this._itemRemovedSubject.asObservable();\n  }\n\n  public getItem(key: string): string {\n    return this._storageObject.getItem(key) || null;\n  }\n\n  public setItem(key: string, value: string): void {\n    this._itemSetSubject.next({\n      key,\n      value\n    });\n\n    this._setItemInStorage(key, value);\n  }\n\n  public removeItem(key: string): void {\n    let currentValue = this.tryGetObject(key);\n\n    if (!currentValue) {\n      currentValue = this.getItem(key);\n    }\n\n    this._itemRemovedSubject.next({\n      key,\n      value: currentValue\n    });\n\n    this._storageObject.removeItem(key);\n  }\n\n  public key(index: number): string {\n    return this._storageObject.key(index);\n  }\n\n  public clear(): void {\n    this._storageObject.clear();\n  }\n\n  public get length(): number {\n    return this._storageObject.length;\n  }\n\n  public getObject<T>(key: string): T {\n    let jsonInStorage = this.getItem(key);\n\n    if (jsonInStorage === null) {\n      return null;\n    }\n\n    return JSON.parse(jsonInStorage) as T;\n  }\n\n  public tryGetObject<T>(key: string): T {\n    try {\n      return this.getObject<T>(key);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  public setObject(key: string, value: any): void {\n    this._itemSetSubject.next({\n      key,\n      value\n    });\n\n    this._setItemInStorage(key, JSON.stringify(value));\n  }\n\n  private _setItemInStorage(key: string, value: string) {\n    this._storageObject.setItem(key, value);\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}

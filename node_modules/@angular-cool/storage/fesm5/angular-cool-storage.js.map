{
  "version": 3,
  "file": "angular-cool-storage.js",
  "sources": [
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-storage.module.ts",
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-session-storage.ts",
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-local-storage.ts",
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-server-storage.ts",
    "ng://@angular-cool/storage/projects/storage/src/lib/cool-storage-base.ts"
  ],
  "sourcesContent": [
    "import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CoolLocalStorage } from './cool-local-storage';\nimport { CoolSessionStorage } from './cool-session-storage';\n\n@NgModule({\n  providers: [\n    CoolLocalStorage,\n    CoolSessionStorage\n  ]\n})\nexport class CoolStorageModule {\n  /** @deprecated */\n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: CoolStorageModule,\n      providers: []\n    };\n  }\n}\n",
    "import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nimport { CoolStorageBase } from './cool-storage-base';\nimport { CoolServerStorage } from './cool-server-storage';\n\n@Injectable()\nexport class CoolSessionStorage extends CoolStorageBase {\n  constructor(@Inject(PLATFORM_ID) platformId: any) {\n    if (isPlatformBrowser(platformId)) {\n      super(window.sessionStorage, 'SessionStorage');\n    } else {\n      super(new CoolServerStorage(), 'SessionStorage');\n    }\n  }\n}\n",
    "import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nimport { CoolStorageBase } from './cool-storage-base';\nimport { CoolServerStorage } from './cool-server-storage';\n\n@Injectable()\nexport class CoolLocalStorage extends CoolStorageBase {\n  constructor(@Inject(PLATFORM_ID) platformId: any) {\n    if (isPlatformBrowser(platformId)) {\n      super(window.localStorage, 'LocalStorage');\n    } else {\n      super(new CoolServerStorage(), 'LocalStorage');\n    }\n  }\n}\n",
    "export class CoolServerStorage {\n  private _storageObject: any;\n\n  public constructor() {\n    this._storageObject = {};\n  }\n\n  public getItem(key: string): string {\n    return this._storageObject[key] || null;\n  }\n\n  public setItem(key: string, value: string): void {\n    this._storageObject[key] = value;\n  }\n\n  public removeItem(key: string): void {\n    this._storageObject[key] = undefined;\n  }\n\n  public key(index: number): string {\n    return this._storageObject.key(index);\n  }\n\n  public clear(): void {\n    this._storageObject = {};\n  }\n\n  public get length(): number {\n    return Object.keys(this._storageObject).length;\n  }\n}",
    "import { Observable, Subject } from 'rxjs';\nimport { StorageChangeArguments } from './storage-change-arguments.interface';\n\nexport abstract class CoolStorageBase {\n  private _storageObject: any;\n  private _itemSetSubject: Subject<StorageChangeArguments>;\n  private _itemRemovedSubject: Subject<StorageChangeArguments>;\n\n  protected constructor(storageObject: any, storageObjectName: string) {\n    if (!storageObject) {\n      throw new Error(`Current browser does not support ${ storageObjectName }`);\n    }\n\n    this._storageObject = storageObject;\n\n    this._itemSetSubject = new Subject<StorageChangeArguments>();\n    this._itemRemovedSubject = new Subject<StorageChangeArguments>();\n  }\n\n  public get itemSetObservable(): Observable<StorageChangeArguments> {\n    return this._itemSetSubject.asObservable();\n  }\n\n  public get itemRemovedObservable(): Observable<StorageChangeArguments> {\n    return this._itemRemovedSubject.asObservable();\n  }\n\n  public getItem(key: string): string {\n    return this._storageObject.getItem(key) || null;\n  }\n\n  public setItem(key: string, value: string): void {\n    this._itemSetSubject.next({\n      key,\n      value\n    });\n\n    this._setItemInStorage(key, value);\n  }\n\n  public removeItem(key: string): void {\n    let currentValue = this.tryGetObject(key);\n\n    if (!currentValue) {\n      currentValue = this.getItem(key);\n    }\n\n    this._itemRemovedSubject.next({\n      key,\n      value: currentValue\n    });\n\n    this._storageObject.removeItem(key);\n  }\n\n  public key(index: number): string {\n    return this._storageObject.key(index);\n  }\n\n  public clear(): void {\n    this._storageObject.clear();\n  }\n\n  public get length(): number {\n    return this._storageObject.length;\n  }\n\n  public getObject<T>(key: string): T {\n    let jsonInStorage = this.getItem(key);\n\n    if (jsonInStorage === null) {\n      return null;\n    }\n\n    return JSON.parse(jsonInStorage) as T;\n  }\n\n  public tryGetObject<T>(key: string): T {\n    try {\n      return this.getObject<T>(key);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  public setObject(key: string, value: any): void {\n    this._itemSetSubject.next({\n      key,\n      value\n    });\n\n    this._setItemInStorage(key, JSON.stringify(value));\n  }\n\n  private _setItemInStorage(key: string, value: string) {\n    this._storageObject.setItem(key, value);\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
